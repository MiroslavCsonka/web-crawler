#!/usr/bin/env ruby

require 'optparse'

options = {}
option_parser = OptionParser.new do |opts|
  opts.banner = "Usage: web_parser [options]"

  opts.on('-u', '--url URL', 'Initial url from which to begin') do |url|
    options[:url] = url
  end

  opts.on('-h', '--help', 'Display this screen') do
    puts opts
    exit
  end
end

begin
  option_parser.parse!
  unless options[:url]
    raise OptionParser::MissingArgument.new(:url)
  end
rescue OptionParser::InvalidOption, OptionParser::MissingArgument => e
  puts e.to_s
  puts option_parser
  exit(1)
end

puts "I'm going to scrape #{options.fetch(:url)}!"
